@page "{id:int?}"
@model ResumеBuilder.Pages.Users.DeleteModel

@{
    ViewData["Title"] = "Delete";
}

@{
    string modelId = Html.DisplayTextFor(m => m.User.Id).ToString();
    string? sessionId = HttpContext.Session.GetString("_Id");

    if(sessionId == null || sessionId != modelId)
    {
        <h1>Restricted Access</h1>
    }
    else
    {
        <h2>Delete</h2>
        <br />
        <h3>Are you sure you want to delete this?</h3>
        <hr />
        <div>
            <dl class="row">
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.FullName)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.FullName)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.DateOfBirth)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.DateOfBirth)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.Username)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.Username)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.Email)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.Email)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.PhoneNumber)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.PhoneNumber)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.Address)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.Address)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.User.Password)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.User.Password)
                </dd>
            </dl>

            <form method="post">
                <input type="hidden" asp-for="User.Id" />
                <input type="submit" value="Delete" class="btn btn-danger" /> |
                <a asp-page="./Details" asp-route-id="@Model.User?.Id">Back to Details</a>
            </form>
        </div>

    }
}